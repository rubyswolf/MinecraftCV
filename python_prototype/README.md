These are my first working versions which were made in python.

# corner_selector_tool.py

This is a tool for pinpointing corners using OpenCV edge detection for assistance.
First you left click and drag to select a retangular region of interest, you should make sure to include the two edges of the corner in this region in full within the rectangle. The image is cropped to this ROI and converted to grayscale. You have several different grayscale modes you can select between with hotkeys. By default it's average (R+G+B)/3 which is selected with A, but you can also select the red, green, or blue channels individually via Z, X and C respectively. There is also a perceptually weighted grayscale mode selected with G using OpenCV's default 2Gray thingo. There's also red-green and blue-green difference modes selected with S and D but they're pretty much unusable and a blocky mess because luminance dominates, especially for desaturated areas. Finally there's saturation mode selected with F which is also pretty much unusable.

While in this ROI view you can hold right click to see all detected edges in white and the two closest edges to your cursor in red and green. Try to left click where you see the corner and it will find the two closest edges to your cursor and find their intersection point for subpixel precision. If there is only one line found it will instead project your click onto that line, if no lines are found it will just use your click as is but it will be pixel aligned and not subpixel so it's more appropriate for less visible lines like background elements. Once you're happy with the corner you can press space and you will be prompted in the console to enter the world coordinates for that corner. After you enter them, the corner will be saved to a line of a csv file in the format `screen x, screen y, world x, world y, world z` and you can feed this into the PnP system to estimate camera XYZ, yaw/pitch and focal length/FOV.

You will need a minimum of about 8 points but the more the better, and you should try to get them spread out across the screen and at different depths in the world to get the best results. If you can't be bothered to do it yourself, you can use the provided examples in the `examples/labeled` folder. You can select the target image by editing the variable at the top of the code.

# pnp_solver.py

This is a tool for solving the PnP problem using OpenCV. It takes in a csv file of the format `screen x, screen y, world x, world y, world z` and the image dimensions uses the 2D-3D correspondences to estimate the camera pose and focal length. The results are printed to the console. You can test it out with the provided examples in the `examples/labeled` folder which have already been labeled with the corner selector tool and the first example is already set up and ready to go. You can also try it out with your own examples by creating your own csv files in the same format. It optionally takes in a ground truth text document (format provided in example) to calculate the error of the predictions compared to the ground truth.
